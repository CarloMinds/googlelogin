var attentify={conversation:[],getConversation:function(){let e=this.getCookies("conversation");if(e)this.conversation=JSON.parse(e);else this.conversation=[]},setCookie:function(e,t,i){const n=new Date;if(!i)i=30;n.setTime(n.getTime()+i*24*60*60*1e3);expires=`expires=${n.toUTCString()}`;let s=`converstaion=${JSON.stringify(this.conversation)}`;document.cookie=`${e}=${t}; ${expires};${s}; Secure; SameSite=None;path=/`},setConfig:function(e){this.setCookie("config",e)},setConversation:function(){this.setCookie("conversation",JSON.stringify(this.conversation))},getCookies:function(e){const t=document.cookie.split("; ");const n={};t.forEach(e=>{const[t,i]=e.split("=");n[t]=decodeURIComponent(i)});return n[e]},update:function(){let e=attentify.getCookies("config");if(e){$("body").removeClass("dark light");$("body").addClass(e)}attentify.getConversation()},addConversation:function(e,t,i){const n={type:t,id:e,email:i};let s=this.conversation.findIndex(e=>e.email==n.email);if(s==-1){this.conversation.push(n)}else{this.conversation[s].type=n.type;this.conversation[s].email=n.email;this.conversation[s].id=n.id}this.setConversation()},removeConversation:function(t){let e=this.conversation.findIndex(e=>e.id==t);if(e==-1){return}else{this.conversation.splice(e,1)}this.setConversation()},getConverstaionEmail:function(t){let e=this.conversation.findIndex(e=>e.id==t);if(e==-1){return""}else{return this.conversation[e].email}return""},initPopup:function(){const e=this.getCookies("config");$('.dark_mode_toggle_menu_item input[type="checkbox"]').prop("checked",e=="dark")},initPerformanceData:function(n){if(!n)return;let s=$("#personalInboxOverviewController .total_conversations > span:first-child").html()*1;let a=$("#smsOverview .total_conversations > span:first-child").html()*1;if(n.nCntOnTime){let e=$("#performance_data .happy > span:first-child").html();e=e*1+n.nCntOnTime*1;$("#performance_data .happy > span:first-child").html(e);let t=$("#performance_data .ontime > span:first-child");let i=e/(s+a);if(i!=Number.isNaN){i=Math.round(i*100);t.html(i+"%");$(".service_performance .day_percentage > span:last-child").html(i+"%")}else{t.html("")}}if(n.nCntDanger){let e=$("#performance_data .neutral > span:first-child");let t=e.html();t=t*1+n.nCntDanger*1;e.html(t)}if(n.nCntLate){let e=$("#performance_data .sad > span:first-child");let t=e.html();t=t*1+n.nCntLate*1;e.html(t)}if(n.nCntArchived){let e=$("#performance_data .archived > span:first-child");let t=e.html();t=t*1+n.nCntArchived*1;e.html(t);let i=(s+a-t)/(s+a);if(i!=Number.isNaN){i=Math.round(i*100);$("#performance_data .retention > span.percentage").html(i+"%")}}if(n.nCntReply){let e=$("#performance_data .replied > span:first-child");let t=e.html();t=t*1+n.nCntReply*1;e.html(t);let i=t/(s+a);if(i!=Number.isNaN){i=Math.round(i*100);$(".service_performance .happy_customers > span:last-child").html(i+"%")}}},init:function(){this.update();this.initHeadeeMenu();this.initPopup();$(".dashboard_menu_item > .mode_popup.menu_item").on("click",function(){$("#popup_menu > .dashboard_menu_popup").removeClass("d-none")});$(".dark_mode_toggle_menu_item").on("click",function(){const e=$(this).find('input[type="checkbox"]');e.prop("checked",!e.prop("checked"));if(e.prop("checked")){attentify.setConfig("dark")}else{attentify.setConfig("light")}attentify.update()});$(document).on("click",function(e){if(!$(e.target).closest("#popup_menu, .dashboard_menu_item > .mode_popup.menu_item").length){$("#popup_menu > .dashboard_menu_popup").addClass("d-none")}});$(window).on("resize",function(){const e=$(this).height()-$(".dashboard_header.user").height()-$(".ui-tabs-nav.ui-helper-reset.ui-helper-clearfix.ui-widget-header.ui-corner-all").height();$(".dashboard_content > .widgets").height(e);$(".inbox_scroll").height(e-90)});$("#personalInboxOverviewController .expand-div").on("click",function(){const e=$(this).children("span:first-child").attr("data-icon");if(e=="V"){$(this).children("span:first-child").attr("data-icon","/");$(this).children("span:nth-child(2)").html("Collapse")}else{$(this).children("span:first-child").attr("data-icon","V");$(this).children("span:nth-child(2)").html("Expand")}$("#personalInboxOverviewController .webstores").toggleClass("d-none")});$("#smsOverview .expand-div").on("click",function(){const e=$(this).children("span:first-child").attr("data-icon");if(e=="V"){$(this).children("span:first-child").attr("data-icon","/");$(this).children("span:nth-child(2)").html("Collapse")}else{$(this).children("span:first-child").attr("data-icon","V");$(this).children("span:nth-child(2)").html("Expand")}$("#smsOverview .webstores").toggleClass("d-none")});const e=(new signalR.HubConnectionBuilder).withUrl("/ws").build();e.start().then(function(){}).catch(function(e){return console.error(e.toString())});e.on("ReceiveMessage",function(e,t){let l=JSON.parse(t);if(!l)return;if(l.type=="mail"){let e=l.MailInfo;if(!e)return;if(e.nCntWhole!="0"){$("#personalInboxOverviewController .total_conversations > span:first-child").html(e.nCntWhole)}else{$("#personalInboxOverviewController .total_conversations > span:first-child").html(0)}if(e.nCntUnread!="0"){$("#personalInboxOverviewController .unread_badge").removeClass("d-none");$("#personalInboxOverviewController .unread_badge").html(e.nCntUnread)}else{$("#personalInboxOverviewController .unread_badge").addClass("d-none")}if(e.nCntRead!="0"){$("#personalInboxOverviewController .my-webstores td:nth-child(5)").html(e.nCntRead)}else{$("#personalInboxOverviewController .my-webstores td:nth-child(5)").html("-")}if(e.nCntLate!="0"){$("#personalInboxOverviewController .too_late > span:first-child").html(e.nCntLate);$("#personalInboxOverviewController .my-webstores td:nth-child(2)").html(e.nCntLate)}else{$("#personalInboxOverviewController .too_late > span:first-child").html(0);$("#personalInboxOverviewController .my-webstores td:nth-child(2)").html("-")}if(e.nCntDanger!="0"){$("#personalInboxOverviewController .em_danger > span:first-child").html(e.nCntDanger);$("#personalInboxOverviewController .my-webstores td:nth-child(3)").html(e.nCntDanger)}else{$("#personalInboxOverviewController .em_danger > span:first-child").html(0);$("#personalInboxOverviewController .my-webstores td:nth-child(3)").html("-")}if(e.nCntOnTime!="0"){$("#personalInboxOverviewController .on_time > span:first-child").html(e.nCntOnTime);$("#personalInboxOverviewController .my-webstores td:nth-child(4)").html(e.nCntOnTime)}else{$("#personalInboxOverviewController .on_time > span:first-child").html(0);$("#personalInboxOverviewController .my-webstores td:nth-child(4)").html(e.nCntOnTime)}if(e.nCntArchived!="0"){$("#performance_data .archived > span.value").html(e.nCntArchived)}else{$("#performance_data .archived > span.value").html(0)}attentify.initPerformanceData(e)}else if(l.type=="store"){let i=l.orders;if(!i)return;let n=0;let s="",a="";for(let t=0;t<i.length;t++){let e=i[t];if(!e)continue;n+=e.count*1;s+=`<li>
                            <a href="/shopify/orders?store=${e.store}">
                                <span class="mr-3 avatar-icon bg-success-lighten-2"><i class="icon-present"></i></span>
                                <div class="notification-content">
                                    <h6 class="notification-heading">New Orders ${e.store}</h6>
                                    <span class="notification-text">${e.count}</span>
                                </div>
                            </a>
                        </li>`;a+=`<li>
                        <a href="/shopify/orders?store=${e.store}" style="display: flex; align-items: center;">
                            <span class="label label-pill custom-badge">${e.count!="0"?e.count:""}</span>
                            <span class="caption">${e.store}</span>
                        </a>
                    </li>`}$(".notify-header .order-notify").html(s);$("#menu .order-menu").html(a);if(n!=0)$(".order-all-cnt").html(n)}else if(l.type=="sms"){let e=l.SMSInfo;if(!e)return;if(e.nCntWhole!="0"){$("#smsOverview .total_conversations > span:first-child").html(e.nCntWhole)}else{$("#smsOverview .total_conversations > span:first-child").html(0)}if(e.nCntUnread!="0"){$("#smsOverview .unread_badge").removeClass("d-none");$("#smsOverview .unread_badge").html(e.nCntUnread)}else{$("#smsOverview .unread_badge").addClass("d-none")}if(e.nCntRead!="0"){$("#smsOverview .my-webstores td:nth-child(5)").html(e.nCntRead)}else{$("#smsOverview .my-webstores td:nth-child(5)").html("-")}if(e.nCntLate!="0"){$("#smsOverview .too_late > span:first-child").html(e.nCntLate);$("#smsOverview .my-webstores td:nth-child(2)").html(e.nCntLate)}else{$("#smsOverview .too_late > span:first-child").html(0);$("#smsOverview .my-webstores td:nth-child(2)").html("-")}if(e.nCntDanger!="0"){$("#smsOverview .em_danger > span:first-child").html(e.nCntDanger);$("#smsOverview .my-webstores td:nth-child(3)").html(e.nCntDanger)}else{$("#smsOverview .em_danger > span:first-child").html(0);$("#smsOverview .my-webstores td:nth-child(3)").html("-")}if(e.nCntOnTime!="0"){$("#smsOverview .on_time > span:first-child").html(e.nCntOnTime);$("#smsOverview .my-webstores td:nth-child(4)").html(e.nCntOnTime)}else{$("#smsOverview .on_time > span:first-child").html(0);$("#smsOverview .my-webstores td:nth-child(4)").html(e.nCntOnTime)}attentify.initPerformanceData(e)}else if(l.type=="new_sms"){if(window.location.href.includes("home/dashboard"))return;if($('input[name="Type"]').val()*1!=3)return;let e=$('input[name="GMail"]').val();if(!e)return;let t=l.SMSInfo;if(!t||!t.sm_from)return;if(e!=t.sm_from)return;const i=$('input[name="id"]').val();const n=$('input[name="Type"]').val();const s=$('input[name="GMail"]').val();$("#conversationList").append(`<li class="loading">
                                       <span>Loading...</span>
                                    </li>`);$.post("/home/GetMessageList",{id:i,Type:n,GMail:s},function(e){try{$("#conversationList").html(e)}catch(e){console.log(e)}finally{$("#conversationList").find(".loading").remove()}},"html")}})},initHeadeeMenu:function(){let t=`<li class="non-wizard dashboard_tab ui-state-default ui-corner-top ui-tabs-active ui-state-active" role="tab" tabindex="0" aria-controls="tabs-1" aria-labelledby="ui-id-1" aria-selected="true">
                        <a href="/home/dashboard">
                            <span class="dashboard_tab_icon" data-icon="&"></span>
                            <span class="tabtask">Dashboard</span>
                            <span id="dashboard_tab_unreaditems" style="display: none;" class="dashboard_tab_unreaditems"></span>
                        </a>
                    </li>`;for(var i in this.conversation){let e=this.conversation[i];t+=`<li class="conv_tab ui-state-default ui-corner-top" aria-selected="false">
                        <a href="javascript:;" class="ui-tabs-anchor" data-id="${e.id}" data-type="${e.type}">
                            <span class="tabtask">${e.email}</span>
                            <span class="conversation_tab_unreaditems" style="display: none;"></span>
                        </a>
                        <span class="close-tab close-container voice-connected">
                            <span class="ui-icon voice-tab-status-indication ui-icon-voice-connected" data-icon=""></span>
                            <span class="ui-icon ui-icon-close" data-icon="g"></span>
                        </span>
                    </li>`}$("ul.ui-corner-all").html(t);$("ul.ui-corner-all > li").on("click",function(){const e=$(this).children("a").data("id");const t=$(this).children("a").data("type");location.href=`/home/conversation?id=${e}&Type=${t}`});$(".close-tab").on("click",function(e){const t=$(this).siblings("a").data("id");attentify.removeConversation(t);if($(this).parent("li").hasClass("ui-tabs-active")){location.href="/home/dashboard"}else{attentify.initHeadeeMenu()}e.stopPropagation()})},loadEmailList:function(){let e=$('input[name="PageNo"]').val();if(!e)e=1;let i=$('input[name="Type"]').val();if(!i)i=1;if($("#preview_emails").find(".loading").length>0)return;$("#preview_emails").append(`<li class="loading">
                                       <span>Loading...</span>
                                    </li>`);$.post("/home/MessagesByUserPerPage",{PageNo:e,Type:i},function(t){try{$("#preview_emails").append(t);$(".inbox_menu_column > .menu span").each(function(){$(this).removeClass("active");if($(this).data("mode")==i)$(this).addClass("active")});let e="inbox";if(i==2){e="archive"}else if(i==3){e="SMS"}$("#inbox span.caption").html(e)}catch(e){console.log(e)}finally{$("#preview_emails").find(".loading").remove();attentify._addConversation()}},"html")},_addConversation:function(){$("#preview_emails > .inbox_list_item > .inboxitem").on("click",function(){const e=$(this).data("id");let t=$('input[name="Type"]').val();if(!t)t=1;let i=$(this).data("email");attentify.addConversation(e,t,i);location.href=`/home/conversation?id=${e}&Type=${t}`});$('#preview_emails > .inbox_list_item > .inboxitem input[type="checkbox"]').on("click",function(e){e.stopPropagation()})},initDashboard:function(){this.getConversation();$(".refresh_static_view").on("click",function(){$('input[name="PageNo"]').val(1);$("#preview_emails").html("");attentify.loadEmailList()});$(".inbox_content").on("scroll",function(){if($(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight){let e=$('input[name="PageNo"]').val();let t=$('input[name="Type"]').val();if(!t)t=1;if(!e)e=1;let i=$('input[name="PageCnt"]').val();let n=JSON.parse(i);let s=n.find(e=>e[0]==t);if(e*1>=s[1]*1)return;e=e*1+1;$('input[name="PageNo"]').val(e);attentify.loadEmailList()}});$(".inbox_menu_column .menu.mode_inbox .items .menu_item").on("click",function(){$(".inbox_menu_column > .menu span").each(function(){$(this).removeClass("active")});$(this).addClass("active");let e=$(this).data("mode");let t=$('input[name="Type"]').val();if(e!=t){$("#preview_emails").html("")}$('input[name="Type"]').val(e);$('input[name="PageNo"]').val(0);attentify.loadEmailList()});$("#checkbox").on("click",function(){let e=$(this).prop("checked");$('#preview_emails > li input[type="checkbox"]').prop("checked",e)});$("ul.ui-corner-all > li:first-child").addClass("ui-tabs-active ");$(".action.archive").on("click",function(){let e=[];$('#preview_emails > .inbox_list_item > .inboxitem input[type="checkbox"]').each(function(){if($(this).prop("checked"))e.push($(this).attr("id"))});let t=$(this).data("mode");if(!t||t==0)t=1;$.post("/home/MakeStateByGMails",{arrGmail:e,nType:t},function(e){if(e.status==1){$("#preview_emails").html("");attentify.loadEmailList()}},"json")})},initConversation:function(){this.getConversation();$(".panels span.panel_close").on("click",function(){$(".conversation_container").removeClass("conversation_container_with_panel");$(".panels .panels_inner.panel_width").css("display","none");$(".conversation.history.conversation_with_panel").css("right",0);$(".panel_icons.panel_open_icon").css("display","block")});$(".panel_icons.panel_open_icon").on("click",function(){$(".conversation_container").addClass("conversation_container_with_panel");$(".panels .panels_inner.panel_width").css("display","block","important");$(".conversation.history.conversation_with_panel").css("right",320);$(".panel_icons.panel_open_icon").css("display","none")});const n=$('input[name="id"]').val();const s=$('input[name="Type"]').val();const e=$('input[name="GMail"]').val();$("#conversationList").append(`<li class="loading">
                                       <span>Loading...</span>
                                    </li>`);$.post("/home/GetMessageList",{id:n,Type:s,GMail:e},function(e){try{$("#conversationList").html(e);$("#processAI").trigger("click")}catch(e){console.log(e)}finally{$("#conversationList").find(".loading").remove()}},"html");$("ul.ui-corner-all > li").each(function(){$(this).removeClass("ui-tabs-active");if($(this).children().attr("data-id")==n)$(this).addClass("ui-tabs-active")});$(".archive_button").on("click",function(){$.post("/home/makestatebygmail",{strGmail:e,em_state:3},function(e){if(e.status==1){attentify.removeConversation(n);location.href="/home/dashboard"}},"json")});$("#SendExternalMessageButton").off("click");$("#SendExternalMessageButton").on("click",function(e){e.preventDefault();$(this).prop("disabled",true);const t=$('textarea[name="externalMessage"]').val();if(!t)return;const i=attentify.getConverstaionEmail(n);$.post("/home/sendRequestEmail_",{strTo:i,strBody:t,Type:s},function(e){if(e.status==1){location.href=`/home/conversation?id=${n}&Type=${s}`}$(this).prop("disabled",false)},"json")});$("#processAI").on("click",function(e){let t=$('input[name="id"]').val();let i=$('input[name="Type"]').val();e.preventDefault();let n=attentify.getConverstaionEmail(t);if(!n)return;$(".order_info_widget .loading").removeClass("d-none");if(i==3)n=t;$.post("/home/process",{strGmail:n,Type:i},function(t){try{if(t.status==4){const i=t.data.orderDetail;let e=JSON.parse(i);attentify.setOrderInfo(e)}else if(t.status==-1){$('textarea[name="externalMessage"]').val(t.data.rephase.msg);const e=Swal.mixin({toast:true,position:"top-end",showConfirmButton:false,timer:3e3,timerProgressBar:true,didOpen:e=>{e.onmouseenter=Swal.stopTimer;e.onmouseleave=Swal.resumeTimer}});e.fire({icon:"error",title:t.data.rephase.msg})}}catch(e){console.log(e)}finally{$(".order_info_widget .loading").addClass("d-none");$(this).prop("disabled",false)}},"json")});$(".bnt-prev").on("click",function(){window.history.back()})},setOrderInfo:function(e){let s=e.order;let t=new Date(s.created_at);let i=t.toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hour12:true});let n="",a="";let l=`<div class="card-box"><h4 class="header-title">${s.name}
						<span class="badge badge-pill badge-secondary ml-2">${s.financial_status}</span>
						<span class="badge badge-pill ml-2 ${s.fulfillment_status==null?"badge-warning":"badge-success"} ">${s.fulfillment_status==null?"Unfulfilled":s.fulfillment_status}</span>
					</h4>
					<p class="sub-header">
						${i}
					</p>
					<section class="order-detail">
						<div class="row1_col1">`;if(s.cancel_reason!=null&&s.cancelled_at!=null){n="cancelled";l=`<h4 class="header-title">${s.name}
						<span class="badge badge-pill badge-warning ml-2">Cancelled</span>
						<span class="badge badge-pill badge-secondary ml-2">${s.financial_status}</span>
						<span class="badge badge-pill ml-2 ${s.fulfillment_status==null?"badge-warning":"badge-success"} ">${s.fulfillment_status==null?"Unfulfilled":s.fulfillment_status}</span>
					</h4>
					<p class="sub-header">
						${i}
					</p>
					<section class="order-detail">
						<div class="row1_col1">`}if(s.fulfillment_status==null)l+=`<ul class="sortable-list taskList list-unstyled ui-sortable" id="upcoming">
						<li class="ui-sortable-handle">
							<span class="float-right">${s.shipping_lines[0].code}</span>
							<h5 class="mt-0"><a href="javascript: void(0);" class="text-dark">Delivery method</a></h5>                                                
						</li>`;else{a="fulfilled";let e=new Date(s.fulfillments[0].updated_at);let t=e.toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric"});l+=`<ul class="sortable-list taskList list-unstyled ui-sortable" id="upcoming">
						<li class="ui-sortable-handle">
							<span class="float-right">${t}</span>
							<h5 class="mt-0"><a href="javascript: void(0);" class="text-dark">Fulfilled</a></h5>       
							<div class="clearfix">
							<div class="row">
								<div class="col">
									<p class="mt-0"><a href="javascript: void(0);" class="text-dark">${s.fulfillments[0].tracking_company}</a></p>    									
								</div>
								<div class="col-auto">
									<h6 class="float-right">${s.fulfillments[0].tracking_number}</h6>                                            
								</div>
							</div>
						</li>`}let o=false,r=false;if(a="fulfilled"){o=true}if(n=="cancelled"){o=true;r=true}let c=0,d=0,p=0,m=0;for(let n=0;n<s.line_items.length;n++){let e=s.line_items[n];c+=e.quantity*1;let t=e.price;p+=e.price*e.quantity;if(e.pre_tax_price!=null&&e.pre_tax_price!=undefined){d+=e.pre_tax_price*e.quantity;t=e.pre_tax_price}else{d=p}let i=e.discount_allocations;if(i!=undefined&&i.length!=0)m+=i[0].amount*1;l+=`<li class="ui-sortable-handle">
						<div class="row">
							<div class="col">
								<h6 class="font-13 mt-2 mb-0">${e.name}</h6>
							</div>
							<div class="col-auto">
								<div class="text-right">
									<p class="font-13 mt-2 mb-0">$${t*e.quantity}</p>
								</div>
							</div>
						</div>
						<p>SKU: ${e.sku}</p>
						<div class="clearfix"></div>
						<p>$${t} × ${e.quantity}</p>                        
					</li>`}l+=`<li class="ui-sortable-handle paid">                        
						<h5 class="mt-0"><a href="javascript: void(0);" class="text-dark">Subtotal</a></h5>                                                
						<div class="clearfix"></div>
						<div class="row">
							<div class="col">
								<p class="font-13 mt-2 mb-0">${c>1?c+" items":"1 item"}</p>
							</div>
							<div class="col-auto">
								<div class="text-right">
									<p class="font-13 mt-2 mb-0">$${p}</p>
								</div>
							</div>
						</div>`;if(s.fulfillment_status!=null){let e="";if(s.discount_allocations&&s.discount_allocations.length>0){if(s.discount_applications[0].type=="discount_code"){e=s.discount_applications[0].code}else if(s.discount_applications[0].type=="automatic"){e=s.discount_applications[0].title}}l+=`<h5 class="mt-0"><a href="javascript: void(0);" class="text-dark">Discound</a></h5>
						<div class="clearfix"></div>
						<div class="row">
							<div class="col">
								<p class="font-13 mt-2 mb-0">${e}</p>
							</div>
							<div class="col-auto">
								<div class="text-right">
									<p class="font-13 mt-2 mb-0">-$${m}</p>
								</div>
							</div>
						</div>`}l+=`<h5 class="mt-0"><a href="javascript: void(0);" class="text-dark">Shipping</a></h5>
						<div class="clearfix"></div>
						<div class="row">
							<div class="col">
								<p class="font-13 mt-2 mb-0">${s.shipping_lines[0].title}</p>
							</div>
							<div class="col-auto">
								<div class="text-right">
									<p class="font-13 mt-2 mb-0">$${s.shipping_lines[0].price}</p>
								</div>
							</div>
						</div>
						<div class="clearfix"></div>
						<div class="row">
							<div class="col">
								<h5 class="font-13 mt-2 mb-0">Total</h5>
							</div>
							<div class="col-auto">
								<div class="text-right">
									<p class="font-13 mt-2 mb-0">$${s.total_price}</p>
								</div>
							</div>
						</div>
						<div class="row paid-row">
							<div class="col">
								<h5 class="font-13 mt-2 mb-0">Paid</h5>
							</div>
							<div class="col-auto">
								<div class="text-right">
									<p class="font-13 mt-2 mb-0">$${s.current_total_price}</p>
								</div>
							</div>
						</div>
					</li>
				</ul>
			</div>
			<div class="row2_col2">
				<ul class="sortable-list taskList list-unstyled ui-sortable">
					<li class="ui-sortable-handle customer">
						<h5 class="mt-0"><a href="javascript: void(0);" class="text-dark">Customer</a></h5>
						<div class="clearfix"></div>
						<div class="row">
							<div class="col">
								<p class="font-13 mt-2 mb-0">${s.customer.first_name}${s.customer.last_name} </p>
								<p class="font-13 mt-2 mb-0 d-none">2 orders</p>
							</div>                            
						</div>
						<h5 class="mt-0"><a href="javascript: void(0);" class="text-dark">Contact information</a></h5>
						<div class="clearfix"></div>
						<div class="row">
							<div class="col">
								<p class="font-13 mt-2 mb-0">${s.customer.email!=null?s.customer.email:"no email address"}</p>
								<p class="font-13 mt-2 mb-0">${s.customer.phone!=null?s.customer.phone:"no phone number"}</p>
							</div>
						</div>                        
						<div class="clearfix"></div>
						<h5 class="mt-0"><a href="javascript: void(0);" class="text-dark">Shipping address</a></h5>
						<div class="clearfix"></div>
						<div class="row">
							<div class="col">
								<p class="font-13 mt-2 mb-0">${s.shipping_address.name}</p>
								<p class="font-13 mt-2 mb-0">${s.shipping_address.address1}</p>
								<p class="font-13 mt-2 mb-0">${s.shipping_address.city} ${s.shipping_address.province_code} ${s.shipping_address.zip}</p>
								<p class="font-13 mt-2 mb-0">${s.shipping_address.country}</p>															
							</div>
						</div>
						<h5 class="mt-0"><a href="javascript: void(0);" class="text-dark">Billing address</a></h5>
						<div class="clearfix"></div>
						<div class="row">
							<div class="col">
								<p class="font-13 mt-2 mb-0">${s.billing_address.name}</p>
								<p class="font-13 mt-2 mb-0">${s.billing_address.address1}</p>
								<p class="font-13 mt-2 mb-0">${s.billing_address.city} ${s.shipping_address.province_code} ${s.shipping_address.zip}</p>
								<p class="font-13 mt-2 mb-0">${s.billing_address.country}</p>															
							</div>
						</div>
					</li>
				</ul>  
				<div class="row button-wrapper">
					<div class="col mr-10">
						<button onclick="javascript:attentify.cancel(${s.id});" class="bnt-cancel button" ${o?"disabled":""}>Cancel</button>
					</div>
					<div class="col">
						<button onclick="javascript:attentify.refund(${s.id});" class="bnt-refund button" ${r?"disabled":""}>Refund</button>
					</div>
				</div>
			</div></div>`;$("#order_info").html(l)},cancel:function(i){const e=Swal.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:false});e.fire({title:"Question",text:"Should you process the cancellation request?",icon:"question",showCancelButton:true,confirmButtonText:"Yes, I'll do it!",cancelButtonText:"No, I won't.!",reverseButtons:true}).then(e=>{if(e.isConfirmed){const t=Swal.mixin({toast:true,position:"top-end",showConfirmButton:false,timer:3e3,timerProgressBar:true,didOpen:e=>{e.onmouseenter=Swal.stopTimer;e.onmouseleave=Swal.resumeTimer},didClose:()=>{let e=$('input[name="pageNo"]').val();if(e==undefined)e=0;renderMessage(e)}});$.post("/home/requestShopify",{orderId:i,type:2,em_idx:0},function(e){if(e.status==1){t.fire({icon:"success",title:"The cacellation request was successful."})}else{t.fire({icon:"error",title:"The cacellation request failed."})}},"json")}})},refund:function(i){const e=Swal.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:false});e.fire({title:"Question",text:"Should you process the refund request?",icon:"question",showCancelButton:true,confirmButtonText:"Yes, I'll do it!",cancelButtonText:"No, I won't.!",reverseButtons:true}).then(e=>{if(e.isConfirmed){const t=Swal.mixin({toast:true,position:"top-end",showConfirmButton:false,timer:3e3,timerProgressBar:true,didOpen:e=>{e.onmouseenter=Swal.stopTimer;e.onmouseleave=Swal.resumeTimer},didClose:()=>{let e=$('input[name="pageNo"]').val();if(e==undefined)e=0;renderMessage(e)}});$.post("/home/requestShopify",{orderId:i,type:3,em_idx:0},function(e){if(e.status==1){t.fire({icon:"success",title:"The refund request was successful."})}else{t.fire({icon:"error",title:"The refund request failed."})}},"json")}})}};(function(e){window.cancel=attentify.cancel;window.refund=attentify.refund})(window.jQuery);